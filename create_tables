USE HighbrowEntertainmentAgency
GO

CREATE TABLE Agents
(
AgentID varchar(4) CHECK (AgentID like 'A%') NOT NULL UNIQUE,
AgentFirstName varchar(50) NOT NULL,
AgentLastName varchar(50) NOT NULL,
AgentAddress varchar(50) NOT NULL,
AgentCity varchar(50) NOT NULL,
AgentState varchar(2) NOT NULL,
AgentZip int NOT NULL,
AgentPhone varchar(10) NOT NULL,
DateHired date NOT NULL,
Salary money NOT NULL,
CommissionRate decimal NOT NULL,
CONSTRAINT PK_Agents Primary Key (AgentID),
);
GO

CREATE TABLE Customers
(
CustID varchar(8) CHECK (CustID like 'C%') NOT NULL UNIQUE,
CustFirstName varchar(50) NOT NULL,
CustLastName varchar(50) NOT NULL,
CustAddress varchar(50) NOT NULL,
CustAptNum varchar(50) NULL,
CustState char(2) NOT NULL,
CustAreaCode varchar(10) NOT NULL,
CustPhoneNum varchar(50) NOT NULL,
CONSTRAINT PK_Customers PRIMARY KEY (CustID)
);
GO


CREATE TABLE Groups
( 
GroupID varchar(8) CHECK (GroupID like 'G%') NOT NULL UNIQUE,
GroupStageName char(100) NOT NULL,
GroupSSN varchar(11) UNIQUE NOT NULL,
GroupAddress varchar(100) NOT NULL,
GroupState char(2) NOT NULL,
GroupZip int NOT NULL,
GroupPhone varchar(8) UNIQUE NOT NULL,
GroupPage varchar(50) NULL,
GroupEmail varchar(100) NULL,
GroupDateEntered date NOT NULL,
CONSTRAINT PK_Groups PRIMARY KEY (GroupID)
);
GO

CREATE TABLE Performers
(
PerfID VARCHAR (8) CHECK (PerfID like 'P%') NOT NULL UNIQUE,
PerfFirstName VARCHAR(50) NOT NULL,
PerfLastName VARCHAR(50) NOT NULL,
PerfPhoneNumber VARCHAR(50) NOT NULL,
Gender CHARACTER(1) NOT NULL,
CONSTRAINT PK_Performers primary key (PerfID),
);
GO

CREATE TABLE MusicStyle
(
StyleID varchar(4) CHECK (StyleID like 'M%') NOT NULL UNIQUE,
StyleName varchar(50) NOT NULL,
CONSTRAINT PK_MusicStyle PRIMARY KEY (StyleID)
);
GO

Create Table Engagements
(
EngagementID VARCHAR(8) CHECK (EngagementID like 'EN%') NOT NULL UNIQUE,
StartDate SmallDateTime NOT NULL,
EndDate SmallDateTime NOT NULL,
ContractPrice Money NOT NULL,
CustID VarChar(8) NOT NULL,
AgentID VarChar(4) NOT NULL,
GroupID VarChar(8) NOT NULL,
Constraint PK_Engagements Primary Key(EngagementID),
Constraint FK_Customers Foreign Key(CustID) References Customers(CustID),
Constraint FK_Groups Foreign Key(GroupID) References Groups(GroupID),
Constraint FK_Agents Foreign Key(AgentID) References Agents(AgentID)
);
GO

CREATE TABLE GroupMemberList
(
GroupID varchar(8) CHECK (GroupID like 'G%') NOT NULL,
PerfID varchar(8) CHECK (PerfID like 'P%') NOT NULL,
Status int NOT NULL,
CONSTRAINT PK_GroupMemberList PRIMARY KEY(GroupID, PerfID),
CONSTRAINT FK_Groups2 FOREIGN KEY(GroupID) REFERENCES Groups(GroupID),
CONSTRAINT FK_Performers FOREIGN KEY(PerfID)  REFERENCES Performers(PerfID)
);
GO

CREATE TABLE MusicalPreferences
(
CustID varchar(8) CHECK (CustID like 'C%') NOT NULL,
StyleID varchar(4) CHECK (StyleID like 'M%') NOT NULL,
PreferenceRating int NOT NULL,
CONSTRAINT PK_MusicalPreferences PRIMARY KEY(CustID, StyleID),
CONSTRAINT FK_Customers2 FOREIGN KEY(CustID) REFERENCES Customers(CustID),
CONSTRAINT FK_MusicStyle FOREIGN KEY(StyleID) REFERENCES MusicStyle(StyleID)
);
GO

CREATE TABLE GroupByStyle
(
GroupID varchar(8) CHECK (GroupID like 'G%') NOT NULL,
StyleID varchar(4) CHECK (StyleID like 'M%') NOT NULL,
StyleStrength int NOT NULL,
CONSTRAINT PK_GroupByStyle PRIMARY KEY (GroupID,StyleID),
CONSTRAINT FK_Groups3 FOREIGN KEY (GroupID) REFERENCES Groups(GroupID),
CONSTRAINT FK_MusicStyle2 FOREIGN KEY (StyleID) REFERENCES MusicStyle(StyleID)

);
GO
